(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{20454:(e,t,s)=>{Promise.resolve().then(s.bind(s,58369))},24933:(e,t,s)=>{"use strict";s.d(t,{n:()=>n});var l=s(95155),a=s(10168);let n=e=>{let{title:t,subtitle:s}=e;return(0,l.jsxs)(a.Z,{fullWidth:!0,radius:"lg",className:"flex flex-col text-left p-4 gap-4 border border-default-200 min-h-[120px] justify-between",shadow:"none",children:[(0,l.jsx)("h1",{className:"text-2xl text-default-700 font-black",children:t}),(0,l.jsx)("h2",{className:"text-xl font-bold text-default-400",children:s})]})}},58369:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>J});var l=s(95155),a=s(75191),n=s(24933),r=s(59568),i=s(18850),c=s(65701),d=s(43350),u=s(77520),j=s(84520),o=s(1493),x=s(97376),N=s(96693);let m=()=>{let{signOut:e}=(0,r.A)(),{isOpen:t,onOpen:s,onOpenChange:a}=(0,i.j)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.T,{color:"danger",variant:"flat",onPress:s,startContent:(0,l.jsx)(N.A,{weight:"BoldDuotone",size:20,className:"min-w-[20px]"}),size:"sm",children:"退出"}),(0,l.jsx)(d.Y,{isOpen:t,onOpenChange:a,radius:"lg",hideCloseButton:!0,children:(0,l.jsx)(u.g,{children:t=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.c,{children:"提示"}),(0,l.jsx)(o.h,{children:"您确认要退出登录？"}),(0,l.jsxs)(x.q,{children:[(0,l.jsx)(c.T,{color:"danger",variant:"light",onPress:t,children:"取消"}),(0,l.jsx)(c.T,{color:"danger",onPress:e,children:"确认"})]})]})})})]})};var M=s(86613),g=s(40933),I=s(53929),h=s(49081),y=s(32774),b=s(15471),f=s(85812),T=s(30128),L=s(12115),p=s(60838),z=s(74692),D=s(56671),S=s(85005),_=s(75243),w=s(23156),k=s(85805),A=s(28255),C=s(61181);let v=e=>{let{children:t,...s}=e;return(0,l.jsxs)("button",{className:"embla__button embla__button--prev",type:"button",...s,children:[(0,l.jsx)(A.A,{className:"embla__button__svg"}),t]})},E=e=>{let{children:t,...s}=e;return(0,l.jsxs)("button",{className:"embla__button embla__button--next",type:"button",...s,children:[(0,l.jsx)(C.A,{className:"embla__button__svg"}),t]})};s(69547);let O=e=>{let{children:t,...s}=e;return(0,l.jsx)("button",{type:"button",...s,children:t})},Y=s(39022)({html:!0,linkify:!0,breaks:!0,typographer:!0,listIndent:!0}),U=e=>{let{slides:t,options:s,className:a}=e,[n,r]=(0,S.A)(s,[(0,k.A)()]),{isOpen:N,onOpen:m,onOpenChange:g}=(0,i.j)(),[I,h]=(0,L.useState)(0),{prevBtnDisabled:y,nextBtnDisabled:b,onPrevButtonClick:f,onNextButtonClick:p}=(e=>{let[t,s]=(0,L.useState)(!0),[l,a]=(0,L.useState)(!0),n=(0,L.useCallback)(()=>{e&&e.scrollPrev()},[e]),r=(0,L.useCallback)(()=>{e&&e.scrollNext()},[e]),i=(0,L.useCallback)(e=>{s(!e.canScrollPrev()),a(!e.canScrollNext())},[]);return(0,L.useEffect)(()=>{e&&(i(e),e.on("reInit",i).on("select",i))},[e,i]),{prevBtnDisabled:t,nextBtnDisabled:l,onPrevButtonClick:n,onNextButtonClick:r}})(r),{selectedIndex:z,scrollSnaps:D,onDotButtonClick:A}=(e=>{let[t,s]=(0,L.useState)(0),[l,a]=(0,L.useState)([]),n=(0,L.useCallback)(t=>{e&&e.scrollTo(t)},[e]),r=(0,L.useCallback)(e=>{a(e.scrollSnapList())},[]),i=(0,L.useCallback)(e=>{s(e.selectedScrollSnap())},[]);return(0,L.useEffect)(()=>{e&&(r(e),i(e),e.on("reInit",r).on("reInit",i).on("select",i))},[e,r,i]),{selectedIndex:t,scrollSnaps:l,onDotButtonClick:n}})(r);return(0,L.useEffect)(()=>{if(r){for(let e=0;e<=t.length;e++)if(t[e]){let s=t[e].tags;if(s&&s.includes("弹窗")){h(e),m();return}}}},[r,t]),(0,l.jsxs)("section",{className:(0,M.cn)("embla",a),children:[(0,l.jsxs)("div",{className:"embla__viewport",ref:n,children:[(0,l.jsx)("div",{className:"embla__container",children:t.map((e,t)=>{var s;return(0,l.jsxs)("div",{onClick:()=>{h(t),m()},className:(0,M.cn)("embla__slide","w-full h-60 shadow-none cursor-pointer"),children:[(0,l.jsx)(T.W,{alt:"",radius:"sm",removeWrapper:!0,className:"bg-default-100 z-0 object-cover object-center w-full h-full",src:null!=(s=e.img_url)?s:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjIwMCIgd2lkdGg9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwIDgpIj48Y2lyY2xlIGN4PSIxNzYiIGN5PSIxMiIgcj0iNCIgc3Ryb2tlPSIjZGRkIiBzdHJva2Utd2lkdGg9IjEuMjUiLz48cGF0aCBkPSJNMjAuNS41bDIzIDExbS0yOSA4NGwtMy43OSAxMC4zNzdNMjcuMDM3IDEzMS40bDUuODk4IDIuMjAzLTMuNDYgNS45NDcgNi4wNzIgMi4zOTItMy45MzMgNS43NThtMTI4LjczMyAzNS4zN2wuNjkzLTkuMzE2IDEwLjI5Mi4wNTIuNDE2LTkuMjIyIDkuMjc0LjMzMk0uNSA0OC41czYuMTMxIDYuNDEzIDYuODQ3IDE0LjgwNWMuNzE1IDguMzkzLTIuNTIgMTQuODA2LTIuNTIgMTQuODA2TTEyNC41NTUgOTBzLTcuNDQ0IDAtMTMuNjcgNi4xOTJjLTYuMjI3IDYuMTkyLTQuODM4IDEyLjAxMi00LjgzOCAxMi4wMTJtMi4yNCA2OC42MjZzLTQuMDI2LTkuMDI1LTE4LjE0NS05LjAyNS0xOC4xNDUgNS43LTE4LjE0NSA1LjciIHN0cm9rZT0iI2RkZCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMjUiLz48cGF0aCBkPSJNODUuNzE2IDM2LjE0Nmw1LjI0My05LjUyMWgxMS4wOTNsNS40MTYgOS41MjEtNS40MSA5LjE4NUg5MC45NTN6bTYzLjkwOSAxNS40NzloMTAuNzV2MTAuNzVoLTEwLjc1eiIgc3Ryb2tlPSIjZGRkIiBzdHJva2Utd2lkdGg9IjEuMjUiLz48ZyBmaWxsPSIjZGRkIj48Y2lyY2xlIGN4PSI3MS41IiBjeT0iNy41IiByPSIxLjUiLz48Y2lyY2xlIGN4PSIxNzAuNSIgY3k9Ijk1LjUiIHI9IjEuNSIvPjxjaXJjbGUgY3g9IjgxLjUiIGN5PSIxMzQuNSIgcj0iMS41Ii8+PGNpcmNsZSBjeD0iMTMuNSIgY3k9IjIzLjUiIHI9IjEuNSIvPjxwYXRoIGQ9Ik05MyA3MWgzdjNoLTN6bTMzIDg0aDN2M2gtM3ptLTg1IDE4aDN2M2gtM3oiLz48L2c+PHBhdGggZD0iTTM5LjM4NCA1MS4xMjJsNS43NTgtNC40NTQgNi40NTMgNC4yMDUtMi4yOTQgNy4zNjNoLTcuNzl6TTEzMC4xOTUgNC4wM2wxMy44MyA1LjA2Mi0xMC4wOSA3LjA0OHptLTgzIDk1bDE0LjgzIDUuNDI5LTEwLjgyIDcuNTU3LTQuMDEtMTIuOTg3ek01LjIxMyAxNjEuNDk1bDExLjMyOCAyMC44OTdMMi4yNjUgMTgweiIgc3Ryb2tlPSIjZGRkIiBzdHJva2Utd2lkdGg9IjEuMjUiLz48cGF0aCBkPSJNMTQ5LjA1IDEyNy40NjhzLS41MSAyLjE4My45OTUgMy4zNjZjMS41NiAxLjIyNiA4LjY0Mi0xLjg5NSAzLjk2Ny03Ljc4NS0yLjM2Ny0yLjQ3Ny02LjUtMy4yMjYtOS4zMyAwLTUuMjA4IDUuOTM2IDAgMTcuNTEgMTEuNjEgMTMuNzMgMTIuNDU4LTYuMjU3IDUuNjMzLTIxLjY1Ni01LjA3My0yMi42NTQtNi42MDItLjYwNi0xNC4wNDMgMS43NTYtMTYuMTU3IDEwLjI2OC0xLjcxOCA2LjkyIDEuNTg0IDE3LjM4NyAxMi40NSAyMC40NzYgMTAuODY2IDMuMDkgMTkuMzMxLTQuMzEgMTkuMzMxLTQuMzEiIHN0cm9rZT0iI2RkZCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMjUiLz48L2c+PC9zdmc+"}),(0,l.jsx)(_.R,{size:"sm",radius:"sm",color:"danger",className:"absolute top-4 left-8 z-10",children:"公告"}),(0,l.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-content1/75 m-4 ml-8 px-4 p-2 z-10 flex flex-col gap-1 rounded-small",children:[(0,l.jsx)("span",{className:"font-bold text-foreground",children:e.title}),(0,l.jsx)("span",{className:"text-xs text-default-700",children:new Date(1e3*e.updated_at).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})})]})]},t)})}),(0,l.jsx)(v,{onClick:f,disabled:y}),(0,l.jsx)(E,{onClick:p,disabled:b}),D.length>1&&(0,l.jsx)("div",{className:"embla__dots",children:D.map((e,t)=>(0,l.jsx)(O,{onClick:()=>A(t),className:(0,M.cn)("embla__dot",t===z&&" embla__dot--selected")},t))})]}),(0,l.jsx)(d.Y,{isOpen:N,onOpenChange:g,radius:"lg",hideCloseButton:!0,size:"2xl",scrollBehavior:"inside",children:(0,l.jsx)(u.g,{children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.c,{children:t[I].title}),(0,l.jsx)(o.h,{children:(0,l.jsx)(w.H,{children:(0,l.jsx)("div",{className:"html-content",dangerouslySetInnerHTML:{__html:Y.render(t[I].content)}})})}),(0,l.jsxs)(x.q,{className:"text-sm text-foreground flex justify-between items-center",children:["发布时间：",new Date(1e3*t[I].updated_at).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),(0,l.jsx)(c.T,{size:"sm",color:"primary",onPress:e,className:(0,M.cn)("transition-transform duration-300 hover:scale-105 tracking-wider"),children:"我知道了"})]})]})})})]})};var P=s(24654),G=s(86409),B=s(88431),Z=s(68676),H=s(31857),W=s(792);function J(){let{config:e}=(0,r.A)(),{data:t}=(0,p.Ay)("user/getSubscribe"),{data:s}=(0,p.Ay)("user/notice/fetch"),[,N]=(0,z.Cj)();(0,L.useEffect)(()=>{var e,s;if(!t||!t.data)return;let l=t.data,a={plan:null!=(s=null==(e=l.plan)?void 0:e.name)?s:null,transfer_enable:l.transfer_enable,u:l.u,d:l.d,expired_at:l.expired_at,reset_day:l.reset_day};Object.keys(a).forEach(e=>{null===a[e]&&delete a[e]}),W.YH.user.setEmail(l.email),W.YH.session.setData(a)},[t]);let S=(0,L.useMemo)(()=>{if(!t||!t.data)return{u:0,d:0,transfer_enable:0};let{u:e,d:s,transfer_enable:l}=t.data;return{u:e,d:s,transfer_enable:l}},[t]),_=(0,L.useMemo)(()=>{var e;let s={expired_at:0,reset_day:0,days_remaining:0};if(!t||!t.data||(s.reset_day=null!=(e=t.data.reset_day)?e:-1,!t.data.expired_at))return s;s.expired_at=t.data.expired_at;let l=Math.floor(Date.now()/1e3),a=s.expired_at-l;return s.days_remaining=Math.ceil(a/86400),s},[t]),w=(0,L.useMemo)(()=>t&&t.data?t.data.plan:null,[t]),k=(0,L.useMemo)(()=>{var e;return t&&t.data&&null!=(e=t.data.subscribe_url)?e:""},[t]),{isOpen:A,onOpen:C,onOpenChange:v}=(0,i.j)();return t&&t.data?(0,l.jsxs)("div",{className:"flex flex-col w-full gap-6 sm:gap-12 items-center justify-center",children:[(0,l.jsxs)("div",{className:(0,M.cn)("flex flex-row gap-2 items-center justify-between w-full"),children:[(0,l.jsxs)("span",{className:"text-start text-2xl sm:text-4xl font-extrabold w-[95%] truncate",children:["您好，",t.data.email]}),(0,l.jsx)(m,{})]}),s&&s.data&&s.data.length>0&&(0,l.jsx)(U,{slides:s.data,options:{loop:!0}}),(0,l.jsxs)("div",{className:(0,M.cn)("grid grid-cols-1 sm:grid-cols-3 gap-4 items-start justify-between w-full"),children:[(0,l.jsx)(n.n,{title:"套餐详情",subtitle:(0,l.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,l.jsx)("span",{className:"truncate",children:w?w.name:"暂无套餐"}),(0,l.jsx)(c.T,{size:"sm",radius:"lg",color:"primary",as:g.h,href:"/shop".concat(w?"?id=".concat(w.id):""),children:w?"续费套餐":"购买套餐"})]})}),(0,l.jsx)(n.n,{title:"到期时间",subtitle:w?_.expired_at?_.days_remaining>0?"剩余 ".concat(_.days_remaining," 天"):0===_.days_remaining?"今天到期":(0,l.jsxs)("span",{className:"text-danger",children:["已过期 ",Math.abs(_.days_remaining)," 天"]}):"永久有效":"暂无套餐"}),(0,l.jsx)(n.n,{title:"剩余流量",subtitle:w?(0,l.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,l.jsxs)("span",{children:[(0,a.O)(S.transfer_enable-S.u-S.d,{standard:"jedec"}),_.expired_at&&_.days_remaining<0?" (已失效)":null]}),(S.u+S.d)/S.transfer_enable>.9?(0,l.jsx)(c.T,{size:"sm",radius:"lg",color:"danger",as:"a",href:"/shop?id=".concat(w.id,"&reset=true"),children:"重置流量"}):null]}):"暂无套餐"})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between w-full",children:[(0,l.jsx)(c.T,{fullWidth:!0,color:"primary",variant:"flat",onPress:()=>{N(k),D.oR.success("订阅链接已复制到剪贴板")},startContent:(0,l.jsx)(P.A,{size:20,weight:"LineDuotone"}),children:"复制订阅链接"}),(0,l.jsxs)(I.y,{placement:"bottom",showArrow:!0,children:[(0,l.jsx)(h.T,{children:(0,l.jsx)(c.T,{fullWidth:!0,color:"primary",variant:"flat",onPress:C,startContent:(0,l.jsx)(G.A,{size:20,weight:"LineDuotone"}),children:"生成二维码订阅"})}),(0,l.jsx)(y.C,{children:(0,l.jsxs)("div",{className:"p-2 flex flex-col items-center",children:[(0,l.jsx)(H.h,{value:k,size:192,level:"L",className:"border border-gray-200"}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{className:"font-semibold tracking-wider",children:"使用支持扫码的客户端进行订阅"})]})})]}),(0,l.jsx)(c.T,{fullWidth:!0,color:"primary",variant:"flat",onPress:C,startContent:(0,l.jsx)(B.A,{size:20,weight:"LineDuotone"}),children:"导入至客户端"})]}),(0,l.jsx)(d.Y,{isOpen:A,onOpenChange:v,radius:"lg",hideCloseButton:!0,children:(0,l.jsx)(u.g,{children:()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.c,{children:"导入至客户端"}),(0,l.jsx)(o.h,{children:(0,l.jsx)(b.r,{"aria-label":"Options",classNames:{panel:(0,M.cn)("p-0 gap-2 flex flex-row w-full","justify-center md:justify-start items-center flex-wrap")},children:e&&e.clients.map(t=>(0,l.jsx)(f.i,{title:t.name,children:Object.keys(t.items).map(s=>t.items[s]?(0,l.jsxs)(c.T,{className:(0,M.cn)("flex flex-col gap-2 h-24 w-24","justify-center items-center"),variant:"flat",as:g.h,href:(0,Z.jJ)(s,k,e.title),target:"_self",children:[(0,l.jsx)(T.W,{src:Z.Is[s],alt:s,width:36}),s]},t.name+s):null)},t.name))})}),(0,l.jsx)(x.q,{})]})})})]}):null}},69547:()=>{}},e=>{e.O(0,[666,825,84,876,895,330,671,829,215,234,479,76,216,183,326,554,945,33,441,964,358],()=>e(e.s=20454)),_N_E=e.O()}]);